<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>トレーニング設定</title>
</head>
<body>

<div class="w-100 alert alert-warning" role="alert">トレーニング機能は、BirdNET モデルを使用している場合にのみ利用可能です</div>
<table class="table table-hover p-1">
    <tr>
        <td><b>トレーニング音声の場所</b></td>
        <td>トレーニングに使用する音声ファイルは、各種の音声を別々のフォルダに分けて保存してください。
            各フォルダ名は、BirdNET や Nocmig モデルで使用されている形式 <code>学名_英名</code> に従う必要があります。</td>
    </tr>
    <tr>
        <td><b>データセットキャッシュの場所</b></td>
        <td>データセットキャッシュとは、Chirpity が処理済みの音声ファイルやメタデータを保存する場所です。指定がない場合は、トレーニング音声の場所が使用されます。
            最適なパフォーマンスのために、高速な SSD 上の場所を選択することをお勧めします。</td>
    </tr>
    <tr>
        <td><b>既存のキャッシュがあれば使用</b></td>
        <td>
            <p>キャッシュの準備には時間がかかる場合があります。このオプションをオンにすると、トレーニングのたびにキャッシュを再生成することはありません。</p>
            <p>トレーニング／検証の分割を変更すると、このオプションはリセットされます。</p>
        </td>
    </tr>
    <tr>
        <td><b>モデルの保存先</b></td>
        <td>
            <p>トレーニング済みのモデルファイルはこの場所に保存されます。</p>
        </td>
    </tr>
    <tr>
        <td><b>ラベルを上書きまたは追加</b></td>
        <td>
            <p>「ラベルを上書き」を選択した場合、保存されるモデルには、トレーニングデータセットに含まれるクラスのみが含まれます。</p>
            <p>「ラベルを追加」を選択した場合、BirdNET の既存クラスは維持され、トレーニングフォルダの新しいクラスが追加されます。</p>
            <p><b>重要：</b> 新しいクラス名は、既存のクラス名と重複してはいけません。既存のクラスを上書きしたい場合は、名前の最後に「-」を付けてください（例：<i>Turdus iliacus_Redwing-</i>）。</p>
        </td>
    </tr>
    <tr>
        <td><b>トレーニングパラメータ</b></td>
        <td>
            <p>これらの項目は、モデルの基本的なトレーニング設定を定義します。</p>
            <ul>
                <li><b>エポック数：</b> データセット全体をモデルに通す回数。</li>
                <li><b>学習率：</b> モデルが重みを更新する際のステップサイズ。</li>
                <li><b>ラベルスムージング：</b> モデルが特定のクラスに過度に自信を持たないようにするための手法。</li>
                <li><b>フォーカルロスを使用：</b> 難しい例に重点を置いて、クラス不均衡を扱う方法。</li>
                <li><b>クラス重みを使用：</b> トレーニング中に、少数派クラスにより重みを与える。</li>
                <li><b>学習率の減衰を使用：</b> トレーニングの進行に応じて学習率を徐々に下げることで、微調整を可能にします。</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td><b>音声データセット</b></td>
        <td>
            検証に使用するデータセットの割合をここで設定します。検証データはモデルの評価に使用され、トレーニングには使用されません。
        </td>
    </tr>
    <tr>
        <td><b>データ拡張</b></td>
        <td>
            <p>これらのオプションは、モデルの汎用性を高めるために、トレーニングデータに対する加工方法を制御します。</p>
            <ul>
                <li><b>Mixup：</b> 複数のトレーニングサンプルを合成して新しいサンプルを作成します。汎化能力の向上に効果的です。</li>
                <li><b>シフト：</b> 音声データを時間的にずらすことで、新たなトレーニングサンプルを生成します。<b>（注：CPU バックエンド使用時のみ利用可能）</b></li>
                <li><b>背景ノイズの追加：</b> トレーニング音声に雑音を加えることで、ノイズ環境でも頑健なモデルになります。</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td><b>分類器</b></td>
        <td>
            <p>これらのパラメータは、分類器の構造を調整するためのものです。</p>
            <ul>
                <li><b>隠れユニット数：</b> 隠れ層にあるニューロンの数。数が多いほど複雑なパターンを学習できますが、<a href="https://developers.google.com/machine-learning/crash-course/overfitting/overfitting" target="_blank">過学習</a> のリスクも高まります。0 にすると隠れ層は使用されません。</li>
                <li><b>ドロップアウト：</b> トレーニング中に一部のユニットをランダムに無効にすることで、過学習を防ぐ技術です。</li>
            </ul>
        </td>
    </tr>
</table>

</body>
</html>
