<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="LIST_CACHE"><span class="type-signature"></span>LIST_CACHE<span class="type-signature"></span></h4>




<div class="description">
    setIncludedIDsCalls list_worker for a new list, checks to see if a pending promise already exists
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4496">line 4496</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="t0_warmup"><span class="type-signature"></span>t0_warmup<span class="type-signature"></span></h4>




<div class="description">
    Collect DIAGNOSTICS Information
DIAGNOSTICS keys:
GPUx - name of GPU(s)
backend: tensorflow backend in use
warmup: time to warm up model (seconds)
"Analysis Duration": time on detections (seconds)
"Audio Duration": length of audio (seconds)
"Chirpity Version": app version
"Model": model in use
"Tensorflow Backend"
Analysis Rate: x real time performance
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line472">line 472</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="_updateSpeciesLocale"><span class="type-signature">(async) </span>_updateSpeciesLocale<span class="signature">(db, labels)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Update species common names in the database using provided label mappings.Parses an array of label strings formatted as "speciesName_commonName" and updates the correspondingentries in the species table. For the "birdnet" model, a direct update query is executed; for other models,existing common names are retrieved and conditionally updated based on matching parenthesized tokens.All operations are executed within a single transaction to ensure atomicity. If any update fails, thetransaction is rolled back and the error is propagated.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">A database connection object that supports asynchronous methods (runAsync, prepare, and finalize).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>labels</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">An array of label strings in the format "speciesName_commonName".</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4261">line 4261</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If any database operation fails during the transaction.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when all updates are successfully committed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// For a 'birdnet' model, updating a species 'sparrow' to a common name 'House Sparrow'await _updateSpeciesLocale(db, ["sparrow_House Sparrow"]);</code></pre>



        
            

    

    
    <h4 class="name" id="activateResultSort"><span class="type-signature"></span>activateResultSort<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Updates the UI sort indicators based on the current sort configuration.Adjusts the visibility and styling of time, species, and metadata sort icons within the header elementaccording to the global sort settings. When score-based sorting is active, time icons are hidden while speciesicons reflect the sort order by toggling the "flipped" class for ascending order. Metadata sort icons are similarlyupdated based on the active metadata sort field and direction. Additionally, the header's background style isupdated, and the summary sort indicator is refreshed via showSummarySortIcon().Global State Dependencies:- STATE.resultsSortOrder: Determines if results are sorted by score and the sort direction.- STATE.resultsMetaSortOrder: Specifies the active metadata sort field and sort direction.- DOM.resultHeader: The header element containing sort icons.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line4326">line 4326</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="addDays"><span class="type-signature"></span>addDays<span class="signature">(date, days)</span><span class="type-signature"> &rarr; {Date}</span></h4>
    

    



<div class="description">
    Adds a specified number of days to a given date and returns a new Date object.This function accepts a date provided as a Date object, a date string, or a timestamp, and adds the given number of days.Use negative values for subtracting days. It throws an error if the input date is invalid or if the days parameter is not a valid number.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>date</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>
|

<span class="param-type">string</span>
|

<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The original date to modify. Can be a Date object, a valid date string, or a timestamp.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>days</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The number of days to add. Use a negative value to subtract days.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1785">line 1785</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If the input date is invalid or if days is not a valid number.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">TypeError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A new Date object representing the date after adding the specified number of days.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Date</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Add 3 days to the current dateconst newDate = addDays(new Date(), 3);</code></pre>



        
            

    

    
    <h4 class="name" id="addToHistory"><span class="type-signature"></span>addToHistory<span class="signature">(record, newCname<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object|undefined}</span></h4>
    

    



<div class="description">
    Extracts metadata from a DOM record representing an audio detection and adds it to the global history.The function parses details from the record's child elements—such as species information, confidence (or a default value for records lacking a confidence bar), comment, label, and call count—while also determining the record's associated file, row, and table (setting). If a new canonical name is provided via the second argument, it will override the extracted species name in the history entry. The constructed data array is pushed to the global HISTORY. If the record is not part of a table, no history entry is added and undefined is returned.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>record</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLElement</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The DOM element containing record details.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newCname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Optional name to override the extracted species name.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line7294">line 7294</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    An object containing properties: species, start, end, confidence, label, callCount, comment, file, row, and setting if the record is within a table; otherwise, undefined.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="analyseReset"><span class="type-signature"></span>analyseReset<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Resets the analysis state for a new operation.This function clears any active selections, resets the file number display,clears diagnostic information, and empties the Audacity labels. It also ensuresthat the progress indicator is visible.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1149">line 1149</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="batchInsertRecords"><span class="type-signature">(async) </span>batchInsertRecords<span class="signature">(cname, label, files, originalCname)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Performs batch insertion of audio records into the database.Retrieves records using a prepared statement based on the original identifier,then iterates through each record to insert it individually via onInsertManualRecord.The operation is performed within a mutex lock and a database transaction toguarantee atomicity. A UI update is triggered after the final record is processed,and debug timing information is logged if enabled.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>cname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Identifier used for the new records.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Label to associate with each inserted record.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>files</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">List of files; currently reserved and not utilized by the function.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>originalCname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Original identifier used in the prepared statement query.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line2886">line 2886</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Propagates any error encountered during the database transaction,                ensuring a rollback to avoid partial insertions.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the batch insertion completes.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>await batchInsertRecords("newCampaign", "approved", fileList, "origCampaign");</code></pre>



        
            

    

    
    <h4 class="name" id="changeInputElement"><span class="type-signature"></span>changeInputElement<span class="signature">(column, element, key, preSelected<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {HTMLElement}</span></h4>
    

    



<div class="description">
    Replaces a target DOM element with a custom input component based on the specified column.For a column value of "label", creates a dark-themed custom select populated with labels obtained from STATE.tagsList.Otherwise, creates an input element with a prefilled value; if the column is "species", adds an event listener to update suggestion lists.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>column</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Determines the type of input element to generate ("label" for a custom select, "species" for an input with suggestions, or any other value for a generic input).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>element</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLElement</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The DOM element to be replaced by the new input component.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">A unique identifier used as the new element's ID.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preSelected</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">The preselected value to populate the input component.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line7068">line 7068</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The newly created DOM element, either a container with a custom select (for "label") or an input element.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">HTMLElement</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="checkFilteredFrequency"><span class="type-signature"></span>checkFilteredFrequency<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the UI to reflect whether a custom frequency filter is active.Checks the audio configuration to determine if the frequency range has been altered from its default(minFrequency > 0 or maxFrequency < 11950). If so, it applies warning styles to the frequency range displayand enables the reset button. Otherwise, it restores the default styling.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line6188">line 6188</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="checkpoint"><span class="type-signature"></span>checkpoint<span class="signature">(db)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Performs a Write-Ahead Logging (WAL) checkpoint on the provided SQLite database.If a valid database instance is supplied, this function executes the SQL command"PRAGMA wal_checkpoint(TRUNCATE);" to perform a checkpoint, truncating the WAL log.In the event of an error during execution, the error is logged and the returned Promiseis rejected with the error. If no database instance is provided, the Promise resolves immediately.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">null</span>
|

<span class="param-type">undefined</span>


            
            </td>

            

            

            <td class="description last">The SQLite database instance on which to perform the checkpoint.  If no database instance is provided (null or undefined), the checkpoint operation is skipped.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A Promise that resolves when the checkpoint completes successfully or  immediately if no database is provided, and rejects with an error if the checkpoint operation fails.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>checkpoint(database)  .then(() => console.log("WAL checkpoint completed successfully."))  .catch(err => console.error("Error running WAL checkpoint:", err));</code></pre>



        
            

    

    
    <h4 class="name" id="clearActive"><span class="type-signature"></span>clearActive<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Resets the active audio region and clears the corresponding UI selection.This function forcefully resets all defined audio regions by calling`resetRegions(true)`. It then checks if an active table row exists and,if so, removes the "table-active" class from it to remove any UI highlighting.Finally, it clears the `activeRow` reference to ensure that no table row remains marked as active.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line578">line 578</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="closeDatabase"><span class="type-signature"></span>closeDatabase<span class="signature">(db)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Closes a SQLite database connection.This function attempts to close the provided database connection. If no database instanceis provided, the promise resolves immediately. In case of an error during the close operation,the error is logged and the promise is rejected with the encountered error.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>
|

<span class="param-type">null</span>
|

<span class="param-type">undefined</span>


            
            </td>

            

            

            <td class="description last">The SQLite database instance to close. If falsy, no action is taken.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line150">line 150</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the database is successfully closed or if nodatabase is provided, and rejects if an error occurs during the close operation.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>closeDatabase(db)  .then(() => console.log("Database closed successfully."))  .catch(err => console.error("Error closing database:", err));</code></pre>



        
            

    

    
    <h4 class="name" id="convertAndOrganiseFiles"><span class="type-signature">(async) </span>convertAndOrganiseFiles<span class="signature">(threadLimit<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|undefined)>}</span></h4>
    

    



<div class="description">
    Organizes and converts audio files.This asynchronous function verifies that the archive directory exists and is writable before proceeding.It retrieves file records from the database—optionally filtering to include only those with associated detectionrecords when library clips mode is active—and computes target output directories based on each file's recording dateand sanitized location. For files that exist and have not already been converted, the function schedules conversiontasks with a configurable concurrency limit (defaulting to 4), while generating alerts for any encountered issues.Upon completion of all tasks, it updates the UI with final progress and a summary alert detailing the counts ofsuccessful and failed conversions.1. Pull files from db that do not have archiveName2.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>threadLimit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    4
                
                </td>
            

            <td class="description last">Maximum number of concurrent file conversion tasks.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4589">line 4589</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves to false if the archive directory is missing or unwritable; otherwise,the promise resolves when all conversion tasks have been processed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|undefined)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="convertFile"><span class="type-signature">(async) </span>convertFile<span class="signature">(inputFilePath, fullFilePath, row, dbArchiveName, fileProgressMap)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Converts an audio file to the target archive format using FFmpeg, with optional trimming.The function configures FFmpeg’s encoding parameters based on global settings. When converting to "ogg", it appliespreset audio settings (128k bitrate, mono channel, 30000 Hz sample rate). If trimming is enabled, the function adjuststhe audio duration according to computed start and end boundaries and issues alerts for atypical recording lengths.Progress is tracked via a provided map, and upon successful conversion, the file’s modification timestamp andcorresponding database record are updated.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>inputFilePath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Path to the input audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fullFilePath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Destination path for the converted file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>row</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">File metadata including properties such as `id`, `duration`, and `filestart`; the duration may be updated if trimming is applied.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dbArchiveName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Archive name to record in the database.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fileProgressMap</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, number></span>


            
            </td>

            

            

            <td class="description last">Map tracking conversion progress, keyed by file paths.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4760">line 4760</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If an error occurs during the FFmpeg conversion process.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves when conversion and database updates complete.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>convertFile('/path/to/input.wav', '/path/to/output.ogg', fileRecord, db, 'archive123', progressMap)  .then(() => console.log('Conversion completed successfully.'))  .catch(err => console.error('Conversion failed:', err));</code></pre>



        
            

    

    
    <h4 class="name" id="createContextMenu"><span class="type-signature">(async) </span>createContextMenu<span class="signature">(e)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Creates and displays a custom context menu based on the event target.This asynchronous function handles user interactions for generating a context menuin the spectrogram interface. It performs the following actions:- Pauses any ongoing audio playback via the spec.wavesurfer instance to prevent interference.- Stops the propagation of the triggering event.- Checks and adjusts for region detection within the spectrogram.- Determines the context (e.g., summary, selection, or results) of the click and sets  visibility flags for specific menu items.- If necessary, triggers a click on the target element to load or update the active row  and awaits the file load completion.- Constructs the HTML for the context menu with options such as playing a region,  analyzing a selection, creating/editing a manual record, exporting a clip, comparing,  or deleting records.- Sets the modal title based on whether the action is to create or edit a record.- Attaches event listeners to handle deletion and record entry actions based on the context.- Adjusts certain menu items' visibility depending on the active context.- Positions the context menu at the event coordinates.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Event</span>


            
            </td>

            

            

            <td class="description last">The event object that triggers the context menu (typically a MouseEvent).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line5890">line 5890</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves once the context menu is setup and positioned.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="customAnalysisAllMenu"><span class="type-signature"></span>customAnalysisAllMenu<span class="signature">(saved)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the "Analyse All" menu UI based on whether analysis results are saved.Sets the menu's icon, label, and shortcut text using a platform-specific modifier (⌘ for Mac, Ctrl otherwise). When results are saved, displays an upload icon with a label to retrieve all analyses, enables the "reanalyseAll" and "charts" menu items, and conditionally enables "explore" if not already active. When not saved, displays a search icon with the appropriate label and disables the "reanalyseAll" menu item.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>saved</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Indicates if the analysis results are saved.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line823">line 823</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="customiseAnalysisMenu"><span class="type-signature"></span>customiseAnalysisMenu<span class="signature">(saved)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Customizes the analysis menu based on whether an analysis is saved.When the analysis is saved (saved === true), this function updates the menu to display an upload icon and a retrieval label, and it enables the "reanalyse", "charts", and conditionally the "explore" menu items. When the analysis is not saved, it displays a search icon with an analysis label and disables the "reanalyse" menu item.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>saved</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Indicates if the analysis has been saved, determining the menu's appearance and available options.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line845">line 845</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="fetchAudioBuffer"><span class="type-signature">(async) </span>fetchAudioBuffer<span class="signature">(params)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;Buffer>>}</span></h4>
    

    



<div class="description">
    Called when file first loaded, when result clicked and when saving or sending file snippets
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The parameters for fetching the audio buffer.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The file path.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The start time in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The end time in seconds.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line2246">line 2246</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - The audio buffer and start time.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;Buffer>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="filterResults"><span class="type-signature"></span>filterResults<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sends a filter request to the worker to process analysis results if the analysis is complete.This function posts a "filter" action message to the worker using the provided filtering options,which include species filtering criteria, a flag to update the results summary, and optional paginationand range parameters. The filtering is applied only if the analysis has been completed.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last">Filter configuration options.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>species</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    isSpeciesViewFiltered(true)
                
                </td>
            

            <td class="description last">Criteria for filtering by species.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>updateSummary</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">Flag indicating whether to update the summary after filtering.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>offset</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Optional starting index for pagination.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    500
                
                </td>
            

            <td class="description last">Maximum number of results to process.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>range</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Optional constraints to limit the range of filtered results.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line4175">line 4175</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="filterValidFiles"><span class="type-signature"></span>filterValidFiles<span class="signature">(filePaths)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    We post the list to the worker as it has node and that allows it easier access to therequired filesystem routines, returns valid audio file list
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filePaths</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1069">line 1069</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="formatAsBootstrapTable"><span class="type-signature"></span>formatAsBootstrapTable<span class="signature">(jsonData)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Formats a JSON object as a Bootstrap table
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>jsonData</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">The JSON object to format</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line725">line 725</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - HTML string of the formatted Bootstrap table
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="generateBirdIDList"><span class="type-signature"></span>generateBirdIDList<span class="signature">(rows)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Constructs an HTML string of table rows for bird identification data.Iterates through the provided collection of bird records, where each record contains a common name ("cname")and a scientific name ("sname"), and generates a corresponding HTML table row for each.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>rows</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">Collection of bird records with properties "cname" (common name) and "sname" (scientific name).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2298">line 2298</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A string containing HTML table rows for each bird record.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDetectedSpecies"><span class="type-signature"></span>getDetectedSpecies<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    getDetectedSpecies generates a list of species to use in dropdowns for chart and explore mode filtersIt doesn't really make sense to use location specific filtering here, as there is a location filter in thepage. For now, I'm just going skip the included IDs filter if location mode is selected
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line3926">line 3926</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getFileSQLAndParams"><span class="type-signature"></span>getFileSQLAndParams<span class="signature">(range<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array.&lt;(string|Array.&lt;any>)>}</span></h4>
    

    



<div class="description">
    Generates an SQL filtering clause along with its corresponding parameters for file record retrieval.This function constructs an SQL fragment to filter file records based on an optional date range and thecurrent application mode stored in the global STATE variable. Depending on whether a valid range is providedor the application mode is set to "archive", it generates the appropriate conditions and parameters:- When a range object with a defined `start` property is provided, an SQL condition is appended to filter  records where `dateTime` is between `range.start` (inclusive) and `range.end` (exclusive). The provided range  values are pushed to the parameters array.- In "archive" mode, the function creates an SQL condition that filters records by matching either the file's  name or its archiveName against the list obtained from STATE.filesToAnalyse. It also processes file paths  by removing the archive path prefix defined in STATE.library.location.- In "analyse" mode, a file-based filtering condition exists in the code but is currently commented out.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>range</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Optional object specifying a date range for filtering records.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The start boundary of the date range (inclusive).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The end boundary of the date range (exclusive).</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1133">line 1133</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A tuple where the first element is the SQL condition fragment (string)and the second element is an array of parameters to bind to the SQL query.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;(string|Array.&lt;any>)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getFiles"><span class="type-signature">(async) </span>getFiles<span class="signature">(files)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Generates a list of supported audio files, recursively searching directories.Sends this list to the UI
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>files</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">must be a list of file paths</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1048">line 1048</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getFilteredBirds"><span class="type-signature"></span>getFilteredBirds<span class="signature">(search, list<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Array.&lt;{cname: string, sname: string, styled: string}>}</span></h4>
    

    



<div class="description">
    Filters and sorts bird labels based on a search query.This function filters a list of bird labels—each expected to be in the format "sname_cname"—by performinga case-insensitive match with the provided search string. For each label that contains the search term, it splitsthe label by the underscore, reverses the parts to assign the common name (cname) and scientific name (sname), andcreates a `styled` HTML string that formats the names with a line break and italicized scientific name. The resultingarray is then sorted alphabetically by the common name using locale comparison based on the application's localeconfiguration.If the search is empty or not a string, the function returns an empty array.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>search</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Substring used to filter bird labels.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>list</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    LABELS
                
                </td>
            

            <td class="description last">Optional array of bird labels to filter; each label should be formatted as "sname_cname".</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line7138">line 7138</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Array of objects representing filtered and sorted birds.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;{cname: string, sname: string, styled: string}></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getIncludedIDs"><span class="type-signature">(async) </span>getIncludedIDs<span class="signature">(file<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;number>>}</span></h4>
    

    



<div class="description">
    Retrieves a filtered list of species IDs based on the current state and file metadata.For "location" or "nocturnal" lists when local mode is enabled, if a file identifier is provided, the function usesits metadata to extract latitude (lat), longitude (lon), and week information (derived from fileStart if STATE.useWeek is true).The latitude and longitude are concatenated to form a location key. If the corresponding cache entry in STATE.included is missing,setIncludedIDs is invoked to populate it. For other list types, if the cache is absent, setIncludedIDs is called without parameters.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Optional key for retrieving file metadata from METADATA. Expected metadata should include properties like `fileStart`, `lat`, and `lon`.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4451">line 4451</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise resolving to an array of species IDs included in the current filtered results.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;number>></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getResults"><span class="type-signature">(async) </span>getResults<span class="signature">(files:, species:, limit:, offset:, topRankin:, directory:, format:)</span><span class="type-signature"> &rarr; {Promise.&lt;integer>}</span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>files:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">files to query for detections</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>species:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">filter for SQL query</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the pagination limit per page</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>offset:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">is the SQL query offset to use</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>topRankin:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">return results >= to this rank for each datetime</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>directory:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">if set, will export audio of the returned results to this folder</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>format:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">whether to export audio or text</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line3557">line 3557</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A count of the records retrieved
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;integer></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getRowFromStart"><span class="type-signature"></span>getRowFromStart<span class="signature">(table, start)</span><span class="type-signature"> &rarr; {number|undefined}</span></h4>
    

    



<div class="description">
    Retrieves the index of a table row whose associated start time matches a specified value.Iterates over the rows of an HTML table, extracting the start time from each row's "name" attribute.The "name" attribute is expected to be a string with values separated by a "|" character, where thesecond element represents the start time. If the "name" attribute is absent, a default value of 0 is used.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>table</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLTableElement</span>


            
            </td>

            

            

            <td class="description last">The table element containing rows to search.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The target start time to match against the row's parsed start time.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3382">line 3382</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    The index of the first row with a matching start time, or undefined if no match is found.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getValidSpecies"><span class="type-signature">(async) </span>getValidSpecies<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    getValidSpecies generates a list of species included/excluded based on settings For week specific lists, we need the file
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line3954">line 3954</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise <void>
</div>



    





        
            

    

    
    <h4 class="name" id="getWorkingFile"><span class="type-signature">(async) </span>getWorkingFile<span class="signature">(file:)</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|*)>}</span></h4>
    

    



<div class="description">
    getWorkingFile's purpose is to locate a file and set its metadata.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">full path to source file</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1549">line 1549</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|*)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="handleKeyDown"><span class="type-signature"></span>handleKeyDown<span class="signature">(e)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Responds to keydown events by dispatching configured global actions.Logs the pressed key when debugging is enabled. If the pressed key exists in the global actions mapping,hides the context menu, determines the active modifier key (Shift, Control, or Alt; defaults to "no"),tracks the key press event with its modifier via a tracking function, and executes the corresponding action callback.If the key is not mapped, invokes the fallback handler for number keys.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">KeyboardEvent</span>


            
            </td>

            

            

            <td class="description last">The keyboard event triggered on key press.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2639">line 2639</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="handleKeyDownDeBounce"><span class="type-signature"></span>handleKeyDownDeBounce<span class="signature">(e)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Debounces keydown event processing for non-interactive elements.Prevents the default behavior of keydown events when they do not originate froman HTMLInputElement, HTMLTextAreaElement, or CustomSelect. The debounced call delaysthe execution of the keydown handler by 100 milliseconds using a unique identifier ("keyhandler").
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">KeyboardEvent</span>


            
            </td>

            

            

            <td class="description last">The keydown event triggered by the user.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2609">line 2609</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleMessage"><span class="type-signature">(async) </span>handleMessage<span class="signature">(e)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Dispatches incoming worker messages by executing actions specified in the event's data payload.This asynchronous function processes event messages that include an `action` field alongside associated parameters.For any action other than "_init_", it waits for any pending initialization to complete before proceeding.Depending on the action, the function delegates tasks such as initializing environments, processing audio files,managing prediction worker threads, updating database records, handling file operations, and more.Supported actions include:- "_init_": Sets up the environment by initializing the list worker, launching the predictive model, and updating state.- "abort": Aborts currently ongoing processes.- "analyse": Initiates audio analysis by validating prediction workers and sending alerts if they are not ready.- "change-batch-size": Adjusts the batch size used by prediction workers.- "change-threads": Modifies the number of active prediction worker threads.- "change-mode": Switches the operational mode.- "chart": Processes chart data requests.- "check-all-files-saved": Verifies that specified files have been saved in the database.- "convert-dataset": Converts dataset specifications from existing formats.- "create-dataset": Creates a dataset with inclusion identifiers.- "delete": Performs deletion operations.- "delete-species": Removes specified species records.- "export-results": Exports detection results.- "file-load-request": Loads an audio file, optionally clearing in-memory records, and switches modes based on file state.- "filter": Applies filters to results, refreshes summaries, and updates inclusion identifiers.- "get-detected-species-list": Retrieves a list of detected species.- "get-valid-species": Fetches valid species associated with a file.- "get-locations": Retrieves location details for a specified file from the database.- "get-tags": Retrieves a list of tags from the disk database.- "delete-tag": Deletes a tag and generates an alert if an error occurs.- "update-tag": Updates a tag in the database and refreshes the UI with the updated tag list.- "get-valid-files-list": Returns a list of valid files after scanning.- "insert-manual-record": Manually inserts a record and updates summaries and results accordingly.- "load-model": Loads a new predictive model, aborting ongoing processing if necessary.- "post": Uploads processed audio data.- "purge-file": Deletes the specified file.- "compress-and-organise": Compresses and reorganises audio files.- "relocated-file": Updates file paths after relocation.- "save": Saves audio processing data along with associated metadata.- "save2db": Persists changes from the in-memory database to disk.- "set-custom-file-location": Specifies a custom location for file storage.- "update-buffer": Reloads an audio file to update its buffer.- "update-file-start": Adjusts the starting point for audio file processing.- "update-list": Updates internal lists and custom labels, optionally refreshing summaries and results.- "update-locale": Updates locale settings and associated labels.- "update-summary": Refreshes summary data.- "update-state": Updates overall application state, including paths and processing thresholds.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The message event object containing the action and related parameters.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line540">line 540</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves once the message is processed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const msgEvent = {  data: {    action: "analyse",    file: "audio_sample.mp3",    // ...additional parameters for analysis  }};handleMessage(msgEvent);</code></pre>



        
            

    

    
    <h4 class="name" id="loadAudioFile"><span class="type-signature">(async) </span>loadAudioFile<span class="signature">(options)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Asynchronously loads an audio file, processes its audio data, and updates the UI with relevant metadata.This function fetches the audio buffer from the specified file between the given start and end times,then posts the audio data along with metadata to the UI. It also triggers detection processing and poststhe current file's week number based on the application's state. If the file does not exist or an error occursduring processing, an error alert is generated and the promise is rejected.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Configuration options for loading the audio file.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    ""
                
                </td>
            

            <td class="description last">The path to the audio file to load.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">The starting time (in seconds) of the audio segment to load.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    20
                
                </td>
            

            <td class="description last">The ending time (in seconds) of the audio segment to load.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>position</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">The playback position offset for the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>play</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Flag indicating whether to automatically play the audio after loading.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>goToRegion</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last">Flag indicating whether the UI should navigate to a specific region.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1685">line 1685</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        Will reject if the file does not exist or if an error occurs while fetching or processing the audio data.
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the audio file has been successfully loaded and processed,or rejects with a generated error alert if the file cannot be found or processed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>loadAudioFile({  file: "/path/to/audio.mp3",  start: 10,  end: 30,  position: 5,  play: true,  goToRegion: true})  .then(() => console.log("Audio loaded successfully."))  .catch((error) => console.error("Error loading audio:", error));</code></pre>



        
            

    

    
    <h4 class="name" id="loadAudioFileSync"><span class="type-signature"></span>loadAudioFileSync<span class="signature">(filePath, preserveResults)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Loads an audio file by dispatching a file-load request to the worker.This function resets the file status and signals the worker to start processing the file.It is triggered when a user opens a new file or selects a file from the list of open files.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filePath</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The full filesystem path of the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preserveResults</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">If true, existing analysis results are retained; otherwise, they are cleared.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line518">line 518</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="loadDB"><span class="type-signature">(async) </span>loadDB<span class="signature">(path)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>
    

    



<div class="description">
    Loads, configures, and migrates the SQLite database used for audio records and metadata.This asynchronous function initializes the database by:- Fetching default model labels from a remote file (for the "birdnet" model) or a local configuration file,  then appending a default "Unknown Sp." label.- Constructing a unique database filename based on the total number of labels and either creating a new database (via createDB)  or opening an existing one.- Enforcing PRAGMA settings (foreign keys, journal mode, and busy timeout) for reliable operation.- Performing schema migrations on an existing database when necessary, such as:  - Creating indices on species(sname) and species(cname).  - Adding missing columns ("archiveName" and "metadata") to the files table.  - Updating the tags and records tables (including adding a 'reviewed' column and migrating existing records).- Refreshing the global LABELS variable with the preferred locale labels from the species table and notifying the UI if records exist.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The directory path where the database file is or will be located.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line397">line 397</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves to true when the database is successfully loaded and configured.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;boolean></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>loadDB('/data/db')  .then(success => console.log('Database loaded:', success))  .catch(error => console.error('Error loading database:', error));</code></pre>



        
            

    

    
    <h4 class="name" id="locateFile"><span class="type-signature">(async) </span>locateFile<span class="signature">(file)</span><span class="type-signature"> &rarr; {string|null}</span></h4>
    

    



<div class="description">
    Function to locate a file either in the archive, or with the same basename but different extension from SUPPORTED_FILES
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Full path to a file that doesn't exist</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1581">line 1581</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    - Full path to the located file or null if not found
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>
|

<span class="param-type">null</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="membershipCheck"><span class="type-signature">(async) </span>membershipCheck<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|undefined)>}</span></h4>
    

    



<div class="description">
    Asynchronously verifies the current user's membership status and updates the UI accordingly.This function checks membership status via a remote call using the global configuration UUID and retrieves the trial periodfrom the Electron API. It uses localStorage to cache the membership status, its timestamp, and the installation date. The functiondetermines if the user is either a subscriber or within the trial period based on the installation date and trial duration.Based on the result, it updates UI elements by toggling "locked" and "unlocked" classes, enabling or disabling controls, and,if the user is a confirmed member, updating the primary logo image.Side Effects:- Reads from and writes to localStorage (membership status, membership timestamp, and install date).- Modifies DOM elements by replacing "locked" and "unlocked" classes, updating button states, and changing text content.- Changes the primary logo's image source when membership is verified.- Logs membership check details and error information using console.info and console.warn.Note:In case of a remote check error, if a valid cached membership status (cached within the last week) exists, it is used as afallback. Otherwise, the promise may resolve to undefined.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line6891">line 6891</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to a boolean indicating whether the user is a member,or undefined if an error occurs and no valid cached membership status is available.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|undefined)></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>membershipCheck().then(isMember => {  if (isMember) {    console.log('User is a member or within the trial period.');  } else {    console.log('User is not a member or membership status could not be determined.');  }});</code></pre>



        
            

    

    
    <h4 class="name" id="notifyMissingFile"><span class="type-signature">(async) </span>notifyMissingFile<span class="signature">(file)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Notifies the UI about a missing file entry in the database.This asynchronous function queries the disk database for a file record by its name.If a record with an associated ID exists, it considers the file as missing and triggers anerror alert with the message "dbFileMissing" along with the file name in the alert variables.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The name of the file to search for in the database.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1640">line 1640</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

    <div class="param-desc">
    
        Propagates any errors encountered during the database query.
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves once the alert has been generated.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onAnalysisComplete"><span class="type-signature"></span>onAnalysisComplete<span class="signature">(options)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Finalizes audio analysis by updating application state, re-enabling UI settings,and logging diagnostic metrics and tracking events.Resets the prediction flag, restores settings, updates analysis state,and conditionally enables menu items based on available disk records.Hides the progress indicator and, when not in quiet mode, calculatesthe analysis duration and rate for telemetry. In non-quiet mode, recordsthese metrics through event tracking and displays a completion notification.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Options for analysis completion.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>quiet</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Suppresses diagnostic tracking and notifications if true.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3412">line 3412</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onChartData"><span class="type-signature"></span>onChartData<span class="signature">(args)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Processes chart data to update the UI and render a new Chart.js chart.This function updates UI elements based on the provided chart data. If a species name is given,it displays the species title and toggles visibility of the associated records table; otherwise,the records table is hidden. It then updates individual record elements with formatted dates or"N/A"/"No Records" messages. Any existing Chart.js instances are destroyed before constructing a newchart on the canvas element with the id "chart-week". The chart configuration includes bar datasetsfor each year (with an adjustment for hourly data) and, if provided, a line dataset displaying totalhours recorded. A custom plugin is used to set the background color of the canvas.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">An object containing chart configuration and data.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>species</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The species name to display; its presence toggles the records table.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>records</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">A mapping of DOM element IDs to record values (arrays or timestamps) used to update record displays.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>aggregation</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The aggregation level (e.g., "Hour") which determines chart label generation.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pointStart</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The starting timestamp for the data points; may be adjusted for hourly charts.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>results</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">An object where each key is a year and each value is an array of data points for that year.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>total</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;number></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Optional dataset representing total hours recorded, rendered as a line chart if provided.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dataPoints</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The number of data points to generate date labels for the x-axis.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>rate</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">A data rate value included in the arguments (currently unused in chart rendering).</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2384">line 2384</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onLaunch"><span class="type-signature">(async) </span>onLaunch<span class="signature">(options)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Initializes and launches the application environment by configuring model settings, databases, and prediction workers.This function is invoked when the application is first opened or when the model is changed. It sets global flags,configures the sample rate based on the model, updates the application state, loads the disk and memory databases,and spawns prediction workers to process audio data.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Configuration options for launching the application.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>model</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "chirpity"
                
                </td>
            

            <td class="description last">The name of the model to use; if "birdnet", sets sample rate to 48000 Hz, otherwise 24000 Hz.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>batchSize</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    32
                
                </td>
            

            <td class="description last">The size of the batch to process audio data.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>threads</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last">The number of worker threads to spawn for prediction processing.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>backend</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "tensorflow"
                
                </td>
            

            <td class="description last">The backend to use for predictions.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>list</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "everything"
                
                </td>
            

            <td class="description last">Specifies the list or category to use for predictions.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line971">line 971</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Propagates any error encountered during database loading or worker spawning.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the application environment is initialized and prediction workers are spawned.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>onLaunch({  model: "birdnet",  batchSize: 64,  threads: 4,  backend: "tensorflow",  list: "selected"});</code></pre>



        
            

    

    
    <h4 class="name" id="onModelReady"><span class="type-signature"></span>onModelReady<span class="signature">(args<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Initializes application state after the audio model becomes ready.Sets the model ready flag and updates UI elements based on current audio assets:- Enables the "analyse" menu item if an audio file is loaded, and additionally "analyseAll" and "reanalyseAll" if multiple files are open.- Enables the "analyseSelection" menu item when an active audio region exists.- Calculates the warm-up time and logs it in the DIAGNOSTICS object.- Logs the application launch time if this is the first load.- Marks the application as loaded and hides the loading screen.- Requests tag data from the worker.- Initiates the user tour for new users in non-testing environments.- Processes any queued operating system file inputs.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last">Optional parameters (currently unused).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3025">line 3025</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onProgress"><span class="type-signature"></span>onProgress<span class="signature">(args)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the UI progress elements during file loading.Removes the "invisible" class from the progress indicator, then either displays a localizedloading message (when the "text" flag is provided) or shows the current file's position within thequeue of open files. If a progress value is provided, it calculates the percentage (with one-decimalprecision) and updates the progress bar accordingly.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Object containing details for the progress update.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">When truthy, displays a localized "awaiting" message instead of file count.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">File</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The file whose loading progress is being updated.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>progress</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">A value between 0 and 1 representing the load progress.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3173">line 3173</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onResultsComplete"><span class="type-signature"></span>onResultsComplete<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Finalizes result processing after the database has sent the last result.Updates analysis state by disabling the predicting flag and re-enabling settings, replaces the result tablewith the latest content cloned from a buffer, resets the buffer's content, and ensures that the designated rowin the results table is activated. The active row is selected based on the following priority:- If an `active` index is provided, uses that row; if not found (which can occur after an edit), selects the last row  matching daytime or nighttime criteria.- If a `select` value is provided, determines the row index via a helper function and activates that row.- Otherwise, attempts to activate a row marked with the "table-active" class, or defaults to the first table row.Once the active row is determined, it simulates a click on that row and scrolls it into view, hides the progress indicator,and updates the filename panel.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last">Options for handling result activation.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>active</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Specific row index to activate in the result table.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>select</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Value used by a helper function to determine which row to activate.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3320">line 3320</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onSave2DiskDB"><span class="type-signature">(async) </span>onSave2DiskDB<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;unknown>}</span></h4>
    

    



<div class="description">
    Transfers data in memoryDB to diskDB
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line3848">line 3848</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;unknown></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onSaveAudio"><span class="type-signature">(async) </span>onSaveAudio<span class="signature">(options)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Asynchronously saves an audio clip using Electron's file system API.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Parameters for saving the audio clip.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">The audio file data to be saved.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>filename</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The name under which to save the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>extension</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The file extension to use for the saved file.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2343">line 2343</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onSummaryComplete"><span class="type-signature"></span>onSummaryComplete<span class="signature">(options)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Finalizes UI updates after summary data retrieval.This function updates the summary view with new data and applies filters if specified.It enhances the summary table by adding pointer and hover effects to species rows, triggersresult sorting when appropriate,  and togglesmenu item availability based on the summary content and current application state.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">An object containing update parameters.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filterSpecies</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Optional criteria to filter species in the summary.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>summary</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    []
                
                </td>
            

            <td class="description last">An array of summary records to be used for updating the UI.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3470">line 3470</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onUpdateLocale"><span class="type-signature">(async) </span>onUpdateLocale<span class="signature">(locale, labels, refreshResults)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Updates the application's locale by modifying state and database entries, and optionally refreshes analysis results.This asynchronous function updates the global state with the new locale, applies the new locale to both thedisk and memory databases by updating their species labels, and optionally refreshes the application's resultsand summary if requested. It ensures that database operations are performed within a locked context for concurrencysafety, and performs a rollback in case of any error during the update process.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>locale</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The new locale identifier (e.g., "en-US").</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>labels</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">An object mapping species IDs to their localized labels.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>refreshResults</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Indicates whether to refresh the results and summary following the locale update.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line4343">line 4343</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Propagates any error encountered during the update process after rolling back the database transaction.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the locale update process is completed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="onWorkerLoadedAudio"><span class="type-signature">(async) </span>onWorkerLoadedAudio<span class="signature">(location, fileStart, fileDuration, windowBegin, file, position, contents, play, queued, metadata<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Handles audio data loaded by the worker and updates the UI and application state.This function clears loading indicators and any open context menus, assigns the loaded audio bufferalong with its timing and metadata to global state, resets any existing audio regions, and updatesthe spectrogram with the new audio data. It also updates the filename display and enables analysis-relatedmenu options when applicable.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>location</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Identifier for the source location of the audio.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fileStart</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Unix epoch time in milliseconds marking the start time of the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fileDuration</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Duration of the audio file in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>windowBegin</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Offset in seconds from the start of the file indicating the beginning of the audio window.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Full path to the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>position</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Normalized playhead position (0 to 1) within the audio file.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>contents</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Audio buffer containing the loaded audio data.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>play</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Flag indicating whether to automatically play the audio after loading.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>queued</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">Flag indicating if the audio load was queued.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>metadata</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Optional metadata associated with the audio file.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3077">line 3077</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="playRegion"><span class="type-signature"></span>playRegion<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Plays the active audio region after sanitizing its boundaries.This function locates the active region from the global REGIONS object by matching theregion's start time with the global STATE.activeRegion. It then adjusts the region's start andend times to ensure they fall within the valid playback window—ensuring the start is notnegative and the end does not exceed 99.5% of the windowLength to avoid triggering a finishevent that causes a page reload. Note that if playback is paused at the end of an adjacent region,the subsequent region may not play.Side Effects:- Modifies the region's start and end properties for playback.- Initiates playback by calling the region's play() method.Global Dependencies:- REGIONS: An object containing all audio regions.- STATE.activeRegion: The currently active region used for matching.- windowLength: A number representing the maximum playback window length.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line4765">line 4765</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="recordUpdate"><span class="type-signature"></span>recordUpdate<span class="signature">(key)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the active record based on the key assignment configuration.When an assignment exists for the provided key, extracts record details from the currentlyselected row, modifies the appropriate field (species, label, or comment) based on the assignment,and calls the record insertion routine with the updated values. If no active row is selected,logs an informational message and aborts the update.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Identifier used to retrieve the key assignment (appended to "key" for lookup) from the configuration.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2878">line 2878</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Assuming a key assignment exists for key "1" in config.keyAssignment:recordUpdate(1);</code></pre>



        
            

    

    
    <h4 class="name" id="refreshResultsView"><span class="type-signature"></span>refreshResultsView<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Refreshes the results view in the UI based on the current file loading state and available predictions.When a file is loaded, this function hides all UI elements and then displays the spectrogram wrapper.If there are prediction results available, it additionally reveals the results table container and results header.If no file is loaded and there are no open files, all UI elements are hidden.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1163">line 1163</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="refreshSummary"><span class="type-signature"></span>refreshSummary<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Refreshes the summary display by sending an update request to the worker.If audio analysis has completed, this function retrieves the filtered species view and dispatchesan "update-summary" message to the worker with the current species filter.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line5337">line 5337</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="renderResult"><span class="type-signature">(async) </span>renderResult<span class="signature">(options)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Renders a detection result into the results table while managing table headers, pagination, and UI updates.For the first result (index ≤ 1), clears or resets the results table based on the selection mode and sets up table headerswith localized labels. When handling non-database results beyond the configured limit, the function adds pagination oraborts further processing. For valid detection results, it formats timestamps and positions for display, constructs thecorresponding table row including species details, call counts, labels, comments, and review status, and schedules UIupdates to incorporate the new entry.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Options for rendering the result.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last">Sequential index of the detection result.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>result</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last">Detection result data containing properties such as timestamp, position, active,  sname, cname, score, label, tagID, comment, end, count, callCount, isDaylight, and reviewed.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The audio file reference associated with the detection.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isFromDB</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Flag indicating whether the result originates from the database.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>selection</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">Flag indicating if the rendering is for a selection-specific view.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3585">line 3585</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Display each detection as a distinct region on the spectrogram.</li>
        </ul>
    </dd>
    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves once the result has been rendered and the UI updated.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="resetDiagnostics"><span class="type-signature"></span>resetDiagnostics<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Resets diagnostic metrics and clears the history log.Deletes diagnostic entries for "Audio Duration", "Analysis Rate", and "Analysis Duration" from the DIAGNOSTICS object,and resets the HISTORY array to an empty state.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1134">line 1134</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="resultClick"><span class="type-signature">(async) </span>resultClick<span class="signature">(e)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Processes click events on audio analysis result rows.Validates that audio regions are fully established and an audio file is loaded before proceeding. Extracts the file name,start time, end time, and label from the clicked row's "name" attribute (expected in the format "file|start|end|unused|label"),sets the row as active by updating its CSS class, and loads the corresponding audio region. If the clicked target has a "circle"class, waits until the audio file is completely loaded before obtaining selection results.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Event</span>


            
            </td>

            

            

            <td class="description last">The click event triggered by the user.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1532">line 1532</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves once the event processing is complete.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Assuming a table row element with the following "name" attribute:// &lt;tr name="audio.mp3|10|20|unused|Speech">...&lt;/tr>// Attach the event handler as follows:document.querySelector('tr').addEventListener('click', resultClick);</code></pre>



        
            

    

    
    <h4 class="name" id="savedFileCheck"><span class="type-signature">(async) </span>savedFileCheck<span class="signature">(fileList)</span><span class="type-signature"> &rarr; {Promise.&lt;(boolean|undefined)>}</span></h4>
    

    



<div class="description">
    Checks whether all files in the provided list are present in the database.This asynchronous function processes the given file list in batches (up to 25,000 files per batch) to accommodate SQLite's parameter limits.For each batch, it constructs a parameterized SQL query that counts how many of the files exist in the database's "files" table.If any batch has a count lower than the number of files in that batch, the function immediately posts a failure event to the UI and returns false.If all batches are successfully verified, it posts a success event to the UI and returns true.If the database (diskDB) is not loaded, an error alert is generated and the function returns undefined.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fileList</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">An array of file names to verify in the database.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line885">line 885</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves to true if every file is found in the database, false if one or more files are missing, or undefined if the database is not loaded.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(boolean|undefined)></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const files = ['track1.mp3', 'track2.wav'];savedFileCheck(files).then(result => {  if (result === true) {    console.log('All files exist in the database.');  } else if (result === false) {    console.log('Some files are missing in the database.');  } else {    console.log('Database not loaded.');  }});</code></pre>



        
            

    

    
    <h4 class="name" id="sendDetections"><span class="type-signature">(async) </span>sendDetections<span class="signature">(file, start, end, goToRegion)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Retrieves detection records for a given audio file within a specified time range and posts them to the UI.This asynchronous function calculates absolute start and end timestamps by adding the file's metadata offset(in milliseconds) to the provided start and end offsets (in seconds). It queries the database for detectionrecords that satisfy the following criteria:- A confidence level greater than or equal to the configured minimum (STATE.detect.confidence).- A file name matching the provided file parameter.- A detection timestamp between the calculated start and end times.If additional species filters are active, the query further restricts results by species ID. Records areranked using a window function to select the top (most confident) detection per grouping of file and datetime.The function posts the resulting detections to the UI along with a flag that instructs the UI whether tonavigate directly to the corresponding region.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier or name of the audio file used for querying metadata and filtering detections.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The starting offset in seconds from the beginning of the file's recording.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The ending offset in seconds from the beginning of the file's recording.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>goToRegion</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">If true, signals the UI to navigate to the detected region.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1819">line 1819</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when detections have been successfully retrieved and sent to the UI.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setActiveRegion"><span class="type-signature"></span>setActiveRegion<span class="signature">(region)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Activates the specified audio region by updating the global state and UI.This function first clears any previously active regions by resetting their colorsand labels to the default state. It then applies an active style to the provided region,which includes setting a new color and formatting the label. The function updates the globalactive region, positions the playhead at the region's start time (taking into account any window offset),and enables UI menu items such as "export-audio" and, when applicable (i.e., if the model is ready and not predicting),"analyseSelection". If the provided region object is invalid (missing or having non-numeric start or end values),the function logs an error and exits without modifying the state.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>region</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The audio region to activate.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The start time of the region in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The end time of the region in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>content</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">A DOM element or object with an `innerText` property for displaying the region's label.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2690">line 2690</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const region = {  start: 15,  end: 30,  content: { innerText: 'Bird Call' }};setActiveRegion(region);</code></pre>



        
            

    

    
    <h4 class="name" id="setActiveRow"><span class="type-signature"></span>setActiveRow<span class="signature">(start)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Marks the row corresponding to the specified start time as active in the result table.Iterates through all table rows within the result table and checks the "name" attribute, which is expectedto be a pipe-separated string containing file identifier, start time, and additional details. When a row is foundwhere the file matches the current file (STATE.currentFile) and the start time matches the provided value, anypreviously active row (if different) is deactivated, the target row is activated by adding the 'table-active'class, and the row is smoothly scrolled into view.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The start time to match for activating the corresponding table row.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1572">line 1572</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setClickedIndex"><span class="type-signature"></span>setClickedIndex<span class="signature">(target)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Stores the row index of the table row associated with the clicked element.Traverses upward from the provided element to locate the nearest ancestor <tr> element,then assigns its rowIndex to the global variable clickedIndex. It is assumed that thetarget element is within a table row; otherwise, the function may produce errors.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>target</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLElement</span>


            
            </td>

            

            

            <td class="description last">The DOM element that triggered the event.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3754">line 3754</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="setKeyAssignment"><span class="type-signature"></span>setKeyAssignment<span class="signature">(inputEL, key)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Assigns a key binding configuration based on user input.Retrieves the column identifier from the DOM element with the ID matching `${key}-column` and uses it to update the global key assignment stored in `config.keyAssignment`. The function trims the value from the input element and sets it to `null` if empty. It marks the assignment as active when a non-empty value is provided and dynamically enables or disables the input element based on the presence of a valid column.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>inputEL</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLInputElement</span>


            
            </td>

            

            

            <td class="description last">The input element that triggered the change event.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The identifier used to locate the corresponding column element and update the key assignment configuration.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line6993">line 6993</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="setKeyAssignmentUI"><span class="type-signature"></span>setKeyAssignmentUI<span class="signature">(keyAssignments)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Update key assignment UI elements based on the provided configuration.Iterates over each key in the {@code keyAssignments} object, updating the correspondingDOM input elements with their assigned value and column information. If the key's valueis not "unused", the input is enabled. Additionally, for key assignments with a column of"label" or "species", the input element is further processed for specialized handling.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>keyAssignments</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, {value: string, column: string}></span>


            
            </td>

            

            

            <td class="description last">An object mapping element IDs to their key assignment configurations. Each configuration object  should contain:  - {@code value}: The assigned key value. Use "unused" to indicate no assignment.  - {@code column}: The column type, typically "label" or "species", affecting further UI processing.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line7044">line 7044</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const keyAssignments = {  "key1": { value: "A", column: "label" },  "key2": { value: "unused", column: "species" }};setKeyAssignmentUI(keyAssignments);</code></pre>



        
            

    

    
    <h4 class="name" id="setMetadata"><span class="type-signature">(async) </span>setMetadata<span class="signature">(file:, source_file:)</span><span class="type-signature"> &rarr; {Promise.&lt;unknown>}</span></h4>
    

    



<div class="description">
    Called by getWorkingFile, setCustomLocationAssigns file metadata to a metadata cache object. file is the key, and is the source file
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the file name passed to the worker</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>source_file:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the file that exists ( will be different after compression)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line1871">line 1871</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;unknown></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="showAnalyse"><span class="type-signature">(async) </span>showAnalyse<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Initiates the audio analysis workflow.This asynchronous function restores the previously saved analysis state and configures the UI and workerprocess for a new analysis cycle. It disables the active analysis menu item, updates the worker mode,and destroys any existing spectrogram instance to avoid conflicts. If an audio file is loaded, itreveals the spectrogram UI, reinitializes the spectrogram, and updates the worker with the current state.Depending on whether analysis was already completed, it either filters the results or reloads the audio file for analysis.Finally, it resets the displayed results.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1472">line 1472</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="showCharts"><span class="type-signature">(async) </span>showCharts<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Activates chart visualization mode in the UI.This asynchronous function transitions the application into chart mode by saving the currentanalysis state, updating menu items to reflect the mode change, and instructing the worker toadjust its mode and fetch detected species. It sets up a location filter with an associated eventhandler, destroys any existing spectrogram to prevent conflicts, and updates the display to showthe records container for chart visualization.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1384">line 1384</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="showDatePicker"><span class="type-signature"></span>showDatePicker<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Renders a date and time picker form for updating the start time of the current audio file.The form is dynamically created and appended to the filename panel, featuring:- A label and a datetime-local input, with the input's value initialized from STATE.fileStart and its maximum value set to the current datetime.- A submit button that, when activated, converts the selected datetime into a millisecond timestamp, sends an update message to the worker, logs the change, resets analysis results, and updates STATE.fileStart.- A cancel button that removes the form without making any changes.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line639">line 639</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="showExplore"><span class="type-signature">(async) </span>showExplore<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Prepares the interface for Explore mode by updating UI elements, state flags, and worker messages.This asynchronous function sets the file load flag and analysis state, enables and disables appropriate menu items,and sends corresponding messages to the worker to switch to Explore mode and fetch the detected species list for the current range.It also awaits the generation of a location filter, attaches a change event listener to it, reinitializes the spectrogram,resets analysis results, and adjusts the UI layout to prevent scroll issues.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line1425">line 1425</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="showRecordEntryForm"><span class="type-signature">(async) </span>showRecordEntryForm<span class="signature">(mode, batch)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Populates and displays the record entry modal for updating or adding audio record details.Retrieves species information from either the batch selector or the active audio region and auto-populatesrelated fields such as call count and comment when an active record exists. Adjusts the UI based on batch modeby toggling visibility of certain elements, updates labels based on localization settings, and initializes acustom label selector with available tags from the application state. Focus is set to the bird autocomplete inputwhen the modal is shown.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mode</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Identifier for the record update mode, used to set the DB mode field.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>batch</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">If true, applies batch mode settings by using batch-specific species selection and hiding certain form elements.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line6047">line 6047</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Resolves once the record entry form is fully populated and the modal is displayed.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>// Open the record entry form for a single record updateshowRecordEntryForm('update', false);</code></pre>

    <pre class="prettyprint"><code>// Open the record entry form in batch mode for multiple recordsshowRecordEntryForm('add', true);</code></pre>



        
            

    

    
    <h4 class="name" id="showSummarySortIcon"><span class="type-signature"></span>showSummarySortIcon<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Update the sort icon in the summary table to reflect the current sort order.Extracts the sort column and direction from the STATE.summarySortOrder string (formatted as "column direction"),determines the corresponding icon element by constructing its ID ("summary-{column}-icon"),and then hides all sort icons in the summary table before displaying the relevant icon.The icon is styled with the "flipped" class when the sort direction is "ASC", and without it for other directions.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line4389">line 4389</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// If STATE.summarySortOrder is "duration ASC", then the sort icon for "duration" will be shown with the "flipped" class.showSummarySortIcon();</code></pre>



        
            

    

    
    <h4 class="name" id="showWindowDetections"><span class="type-signature"></span>showWindowDetections<span class="signature">(options)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Creates audio regions for detections that occur within the current view window.For each detection, the function adjusts its start and end times by subtracting the global offset`windowOffsetSecs`. Only detections with an adjusted start time less than the current window length are processed.A detection is considered "active" if its adjusted start time matches the start time of the currently active region(`STATE.activeRegion.start`, if defined). If the detection is active and the `goToRegion` flag is true, the view is repositionedto focus on that region. Otherwise, the detection is processed only if the configuration flag `config.specDetections` is enabled.Audio regions are created by calling `createRegion` with the adjusted start and end times, the detection's label,a flag indicating whether to reposition the view (only for active detections when `goToRegion` is true), and an optionalcolour (set to `STATE.regionActiveColour` for active regions). After processing all detections,`STATE.regionsCompleted` is set to true to indicate that region creation is complete.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">An options object.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>detections</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">An array of detection objects. Each object should include:
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>start</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The starting time of the detection in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>end</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The ending time of the detection in seconds.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The label associated with the detection.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>goToRegion</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">If true, reposition the view to the newly created region when the detection is active.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line2273">line 2273</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="speciesFilter"><span class="type-signature"></span>speciesFilter<span class="signature">(e)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Toggles the species filter based on user interaction with the summary table.Validates the event against non-interactive elements and current analysis state before proceeding.If the selected row is already highlighted (indicating an active filter), the highlight is removed;otherwise, all highlighted rows are cleared, the current row is marked, and the corresponding speciesis extracted from the clicked element. In explore mode, the species value is set in the bird list display.Subsequently, the function refreshes the results filtering and resets the UI components without clearingthe summary, pagination, or result listings.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Event</span>


            
            </td>

            

            

            <td class="description last">The DOM event triggered by the user's click on a table row.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3527">line 3527</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Apply species filtering when a table row is clicked.speciesFilter(event);</code></pre>



        
            

    

    
    <h4 class="name" id="updateFilesBeingProcessed"><span class="type-signature"></span>updateFilesBeingProcessed<span class="signature">(file)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Called when a files processing is finished
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>file</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="worker.js.html">worker.js</a>, <a href="worker.js.html#line3335">line 3335</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="updatePagination"><span class="type-signature"></span>updatePagination<span class="signature">(total, offset<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the pagination controls based on the total number of items.If the total exceeds the configured limit, pagination controls are rendered using the given offset.Otherwise, all pagination elements are hidden.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>total</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The total number of items.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>offset</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    STATE.offset
                
                </td>
            

            <td class="description last">The starting offset for pagination.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line3201">line 3201</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="updateSuggestions"><span class="type-signature"></span>updateSuggestions<span class="signature">(input, element, preserveInput)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Updates the suggestions list  based on the input search query.Uses the lowercase value of the provided input element to filter bird suggestions via the globalgetFilteredBirds function. If the search query is shorter than 2 characters, the suggestion elementis hidden. Otherwise, a list of matching suggestions is created where each suggestion, when clicked,updates the selected bird display (the element with ID "selected-bird"), conditionally modifies theinput value based on the preserveInput flag, dispatches a change event on the input, and hides thesuggestion element.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLInputElement</span>


            
            </td>

            

            

            <td class="description last">The input element containing the current search query.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>element</code></td>
            

            <td class="type">
            
                
<span class="param-type">HTMLElement</span>


            
            </td>

            

            

            <td class="description last">The DOM element that displays the list of filtered suggestions.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preserveInput</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Determines whether to keep the input’s value after a suggestion is selected.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ui.js.html">ui.js</a>, <a href="ui.js.html#line7170">line 7170</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#LIST_CACHE">LIST_CACHE</a></li><li><a href="global.html#_updateSpeciesLocale">_updateSpeciesLocale</a></li><li><a href="global.html#activateResultSort">activateResultSort</a></li><li><a href="global.html#addDays">addDays</a></li><li><a href="global.html#addToHistory">addToHistory</a></li><li><a href="global.html#analyseReset">analyseReset</a></li><li><a href="global.html#batchInsertRecords">batchInsertRecords</a></li><li><a href="global.html#changeInputElement">changeInputElement</a></li><li><a href="global.html#checkFilteredFrequency">checkFilteredFrequency</a></li><li><a href="global.html#checkpoint">checkpoint</a></li><li><a href="global.html#clearActive">clearActive</a></li><li><a href="global.html#closeDatabase">closeDatabase</a></li><li><a href="global.html#convertAndOrganiseFiles">convertAndOrganiseFiles</a></li><li><a href="global.html#convertFile">convertFile</a></li><li><a href="global.html#createContextMenu">createContextMenu</a></li><li><a href="global.html#customAnalysisAllMenu">customAnalysisAllMenu</a></li><li><a href="global.html#customiseAnalysisMenu">customiseAnalysisMenu</a></li><li><a href="global.html#fetchAudioBuffer">fetchAudioBuffer</a></li><li><a href="global.html#filterResults">filterResults</a></li><li><a href="global.html#filterValidFiles">filterValidFiles</a></li><li><a href="global.html#formatAsBootstrapTable">formatAsBootstrapTable</a></li><li><a href="global.html#generateBirdIDList">generateBirdIDList</a></li><li><a href="global.html#getDetectedSpecies">getDetectedSpecies</a></li><li><a href="global.html#getFileSQLAndParams">getFileSQLAndParams</a></li><li><a href="global.html#getFiles">getFiles</a></li><li><a href="global.html#getFilteredBirds">getFilteredBirds</a></li><li><a href="global.html#getIncludedIDs">getIncludedIDs</a></li><li><a href="global.html#getResults">getResults</a></li><li><a href="global.html#getRowFromStart">getRowFromStart</a></li><li><a href="global.html#getValidSpecies">getValidSpecies</a></li><li><a href="global.html#getWorkingFile">getWorkingFile</a></li><li><a href="global.html#handleKeyDown">handleKeyDown</a></li><li><a href="global.html#handleKeyDownDeBounce">handleKeyDownDeBounce</a></li><li><a href="global.html#handleMessage">handleMessage</a></li><li><a href="global.html#loadAudioFile">loadAudioFile</a></li><li><a href="global.html#loadAudioFileSync">loadAudioFileSync</a></li><li><a href="global.html#loadDB">loadDB</a></li><li><a href="global.html#locateFile">locateFile</a></li><li><a href="global.html#membershipCheck">membershipCheck</a></li><li><a href="global.html#notifyMissingFile">notifyMissingFile</a></li><li><a href="global.html#onAnalysisComplete">onAnalysisComplete</a></li><li><a href="global.html#onChartData">onChartData</a></li><li><a href="global.html#onLaunch">onLaunch</a></li><li><a href="global.html#onModelReady">onModelReady</a></li><li><a href="global.html#onProgress">onProgress</a></li><li><a href="global.html#onResultsComplete">onResultsComplete</a></li><li><a href="global.html#onSave2DiskDB">onSave2DiskDB</a></li><li><a href="global.html#onSaveAudio">onSaveAudio</a></li><li><a href="global.html#onSummaryComplete">onSummaryComplete</a></li><li><a href="global.html#onUpdateLocale">onUpdateLocale</a></li><li><a href="global.html#onWorkerLoadedAudio">onWorkerLoadedAudio</a></li><li><a href="global.html#playRegion">playRegion</a></li><li><a href="global.html#recordUpdate">recordUpdate</a></li><li><a href="global.html#refreshResultsView">refreshResultsView</a></li><li><a href="global.html#refreshSummary">refreshSummary</a></li><li><a href="global.html#renderResult">renderResult</a></li><li><a href="global.html#resetDiagnostics">resetDiagnostics</a></li><li><a href="global.html#resultClick">resultClick</a></li><li><a href="global.html#savedFileCheck">savedFileCheck</a></li><li><a href="global.html#sendDetections">sendDetections</a></li><li><a href="global.html#setActiveRegion">setActiveRegion</a></li><li><a href="global.html#setActiveRow">setActiveRow</a></li><li><a href="global.html#setClickedIndex">setClickedIndex</a></li><li><a href="global.html#setKeyAssignment">setKeyAssignment</a></li><li><a href="global.html#setKeyAssignmentUI">setKeyAssignmentUI</a></li><li><a href="global.html#setMetadata">setMetadata</a></li><li><a href="global.html#showAnalyse">showAnalyse</a></li><li><a href="global.html#showCharts">showCharts</a></li><li><a href="global.html#showDatePicker">showDatePicker</a></li><li><a href="global.html#showExplore">showExplore</a></li><li><a href="global.html#showRecordEntryForm">showRecordEntryForm</a></li><li><a href="global.html#showSummarySortIcon">showSummarySortIcon</a></li><li><a href="global.html#showWindowDetections">showWindowDetections</a></li><li><a href="global.html#speciesFilter">speciesFilter</a></li><li><a href="global.html#t0_warmup">t0_warmup</a></li><li><a href="global.html#updateFilesBeingProcessed">updateFilesBeingProcessed</a></li><li><a href="global.html#updatePagination">updatePagination</a></li><li><a href="global.html#updateSuggestions">updateSuggestions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Mar 16 2025 17:29:59 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>